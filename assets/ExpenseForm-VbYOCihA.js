import{r as h,j as e,au as O,ab as T}from"./react-ngz0KEri.js";import{B as y}from"./button-BhbNX3hy.js";import{I as v}from"./input-DHhPsQaB.js";import{L as n}from"./label-BMo0q7YE.js";import{T as I}from"./textarea-CvFosHyQ.js";import{b as M,u as B,a as L,S as b,c as g,d as f,e as j,f as o}from"./index-q3cQ66e3.js";import{G as R,H as P}from"./vendor-CfMdQmI6.js";const A={Education:[{value:"education-tuition",label:"ðŸŽ“ Tuition"},{value:"education-books",label:"ðŸ“š Books & Supplies"},{value:"education-online",label:"ðŸ–¥ï¸ Online Courses"}],Food:[{value:"food-groceries",label:"ðŸ›’ Groceries"},{value:"food-restaurants",label:"ðŸ½ï¸ Restaurants"},{value:"food-coffee",label:"â˜• Coffee"}],Transportation:[{value:"transport-fuel",label:"â›½ Fuel"},{value:"transport-public",label:"ðŸšŒ Public Transport"},{value:"transport-ride",label:"ðŸš• Ride Share"}],Healthcare:[{value:"health-doctor",label:"ðŸ©º Doctor Visits"},{value:"health-pharmacy",label:"ðŸ’Š Pharmacy"},{value:"health-insurance",label:"ðŸ›¡ï¸ Insurance"}],Entertainment:[{value:"movies",label:"ðŸŽ¬ Movies"},{value:"games",label:"ðŸŽ® Games"},{value:"events",label:"ðŸŽŸï¸ Events"},{value:"music",label:"ðŸŽµ Music"}],Beauty:[{value:"beauty-salon",label:"ðŸ’‡ Salon"},{value:"beauty-cosmetics",label:"ðŸ’„ Cosmetics"},{value:"beauty-spa",label:"ðŸ§– Spa & Wellness"},{value:"beauty-other",label:"ðŸ’… Other Beauty"}],Social:[{value:"social-gifts",label:"ðŸŽ Gifts"},{value:"social-donations",label:"ðŸ™ Donations"},{value:"social-events",label:"ðŸŽ‰ Events & Parties"},{value:"social-other",label:"ðŸ”– Other Social"}],Other:[{value:"other-misc",label:"ðŸ”– Miscellaneous"}]},Y=({onSubmit:E})=>{const[l,C]=h.useState({date:new Date().toISOString().split("T")[0],amount:0,category:"",description:"",account:"Cash",repeat:"one-time",repeatStart:"",repeatEnd:""}),[u,x]=h.useState(!1),[p,i]=h.useState(""),{toast:c}=M(),{t:s}=B(),{currencies:N,currency:w}=L(),k=[{value:"one-time",label:s("oneTime")||"One-time"},{value:"daily",label:s("daily")||"Daily"},{value:"weekly",label:s("weekly")||"Weekly"},{value:"monthly",label:s("monthly")||"Monthly"},{value:"yearly",label:s("yearly")||"Yearly"}],r=(a,t)=>{C(m=>({...m,[a]:t}))},D=R(P,{}),d=a=>{if(a==="=")try{const t=D.evaluate(p||l.amount.toString());r("amount",parseFloat(t.toString())),i(""),x(!1)}catch{c({title:"Error",description:"Invalid calculation",variant:"destructive"})}else i(a==="C"?"":a==="DEL"?t=>t.slice(0,-1):t=>t+a)};h.useEffect(()=>{if(!u)return;const a=t=>{t.key>="0"&&t.key<="9"||["+","-","*","/","."].includes(t.key)?d(t.key):t.key==="Enter"?d("="):t.key==="Escape"?x(!1):t.key.toLowerCase()==="c"?d("C"):t.key==="Backspace"&&d("DEL")};return window.addEventListener("keydown",a),()=>window.removeEventListener("keydown",a)},[u,p]);const F=a=>{if(a.preventDefault(),!l.amount||!l.category||!l.description){c({title:s("error")||"Error",description:s("fillAllFields")||"Please fill in all required fields",variant:"destructive"});return}if(l.amount<=0){c({title:s("error")||"Error",description:s("amountGreaterThanZero")||"Amount must be greater than 0",variant:"destructive"});return}if(l.repeat!=="one-time"&&(!l.repeatStart||!l.repeatEnd)){c({title:s("error")||"Error",description:s("repeatStartEndRequired")||"Please provide both repeat start and end dates",variant:"destructive"});return}E(l),C({date:new Date().toISOString().split("T")[0],amount:0,category:"",description:"",account:"Cash",repeat:"one-time",repeatStart:"",repeatEnd:""}),i(""),c({title:s("success")||"Success",description:s("expenseAdded")||"Expense added successfully!",variant:"default"})};return e.jsxs("form",{onSubmit:F,className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{htmlFor:"expense-date",children:s("date")||"Date"}),e.jsx(v,{id:"expense-date",type:"date",value:l.date,onChange:a=>r("date",a.target.value),className:"shadow-soft"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(n,{htmlFor:"expense-amount",children:[s("amount")||"Amount"," (",N[w].symbol,") *"]}),e.jsxs("div",{className:"flex relative",children:[e.jsx(v,{id:"expense-amount",type:"number",step:"0.01",min:"0",value:p||l.amount||"",onChange:a=>r("amount",parseFloat(a.target.value)),placeholder:"0.00",className:"shadow-soft pr-10"}),e.jsx(y,{type:"button",variant:"ghost",size:"sm",onClick:()=>x(!u),className:"absolute right-0 top-1/2 -translate-y-1/2",children:e.jsx(O,{className:"h-6 w-7 text-muted-foreground"})})]}),u&&e.jsxs("div",{className:"inline top-16 right-10 w-64 p-2 rounded-lg shadow-md bg-background text-foreground z-50",children:[e.jsx("div",{className:"mb-2 text-right font-mono select-none border-b-2 pb-1 border-gray-200",children:p||l.amount||"0"}),e.jsx("div",{className:"grid grid-cols-5 gap-1",children:["7","8","9","+","4","5","6","-","1","2","3","*","0",".","=","/","C","DEL"].map(a=>e.jsx(y,{type:"button",variant:"outline",size:"sm",onClick:()=>d(a),children:a},a))})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(n,{htmlFor:"expense-category",children:[s("category")," *"]}),e.jsxs(b,{value:l.category,onValueChange:a=>r("category",a),children:[e.jsx(g,{className:"shadow-soft",children:e.jsx(f,{placeholder:s("selectCategory")})}),e.jsx(j,{className:"space-y-2 p-2 max-h-[300px] overflow-auto",children:Object.entries(A).map(([a,t])=>e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-semibold text-muted-foreground px-3 py-1 uppercase",children:s(a)}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:t.map(({value:m,label:S})=>e.jsx(o,{value:m,children:s(S)||S},m))})]},a))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{htmlFor:"expense-account",children:s("account")||"Account"}),e.jsxs(b,{value:l.account,onValueChange:a=>r("account",a),children:[e.jsx(g,{className:"shadow-soft",children:e.jsx(f,{placeholder:s("selectAccount")||"Select account"})}),e.jsxs(j,{children:[e.jsxs(o,{value:"Cash",children:["ðŸ’µ ",s("Cash")||"Cash"]}),e.jsxs(o,{value:"Bank",children:["ðŸ¦ ",s("Bank")||"Bank"]}),e.jsxs(o,{value:"Credit Card",children:["ðŸ’³ ",s("Credit Card")||"Credit Card"]}),e.jsxs(o,{value:"Debit Card",children:["ðŸ§ ",s("Debit Card")||"Debit Card"]}),e.jsxs(o,{value:"Mobile Money",children:["ðŸ“± ",s("Mobile Money")||"Mobile Money"]})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{htmlFor:"expense-repeat",children:s("repeat")||"Repeat"}),e.jsxs(b,{value:l.repeat,onValueChange:a=>r("repeat",a),children:[e.jsx(g,{className:"shadow-soft",children:e.jsx(f,{placeholder:s("repeatFrequency")||"Repeat frequency"})}),e.jsx(j,{children:k.map(({value:a,label:t})=>e.jsx(o,{value:a,children:t},a))})]})]})]}),l.repeat!=="one-time"&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(n,{htmlFor:"repeat-start",children:[s("repeatStart")||"Repeat Start"," *"]}),e.jsx(v,{id:"repeat-start",type:"date",value:l.repeatStart,onChange:a=>r("repeatStart",a.target.value),className:"shadow-soft"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(n,{htmlFor:"repeat-end",children:[s("repeatEnd")||"Repeat End"," *"]}),e.jsx(v,{id:"repeat-end",type:"date",value:l.repeatEnd,onChange:a=>r("repeatEnd",a.target.value),className:"shadow-soft"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(n,{htmlFor:"expense-description",children:[s("description")||"Description"," *"]}),e.jsx(I,{id:"expense-description",value:l.description,onChange:a=>r("description",a.target.value),placeholder:s("expensePlaceholder")||"What did you spend on?",className:"shadow-soft",rows:3})]}),e.jsxs(y,{type:"submit",variant:"expense",className:"w-full",children:[e.jsx(T,{className:"h-4 w-4 mr-2"}),s("addExpense")]})]})};export{Y as ExpenseForm};

import{g as D,b as F,u as L,a as O,j as e,S as g,c as j,d as y,e as b,f as l,P as T}from"./index-Cyp6Y-yQ.js";import{r as x}from"./vendor-DZwePlub.js";import{B as N}from"./button-D2bx5s4T.js";import{I as v}from"./input-BWl_fD1d.js";import{L as i}from"./label-O4SPfgN-.js";import{T as R}from"./textarea-DBrU66Cu.js";import{C as A}from"./calculator-CetJ4wmZ.js";import{c as B,a as M}from"./create-DroyhXul.js";const r=D("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]),q=[{value:"salary",label:"Salary",icon:e.jsx(r,{className:"inline w-4 h-4 mr-1 text-muted-foreground"})},{value:"bonus",label:"Bonus",icon:e.jsx(r,{className:"inline w-4 h-4 mr-1 text-muted-foreground"})},{value:"business",label:"Business",icon:e.jsx(r,{className:"inline w-4 h-4 mr-1 text-muted-foreground"})},{value:"investment",label:"Investment",icon:e.jsx(r,{className:"inline w-4 h-4 mr-1 text-muted-foreground"})},{value:"rental",label:"Rental Income",icon:e.jsx(r,{className:"inline w-4 h-4 mr-1 text-muted-foreground"})},{value:"freelance",label:"Freelance",icon:e.jsx(r,{className:"inline w-4 h-4 mr-1 text-muted-foreground"})},{value:"gift",label:"Gift",icon:e.jsx(r,{className:"inline w-4 h-4 mr-1 text-muted-foreground"})},{value:"allowance",label:"Allowance",icon:e.jsx(r,{className:"inline w-4 h-4 mr-1 text-muted-foreground"})},{value:"refund",label:"Refund",icon:e.jsx(r,{className:"inline w-4 h-4 mr-1 text-muted-foreground"})},{value:"dividend",label:"Dividend",icon:e.jsx(r,{className:"inline w-4 h-4 mr-1 text-muted-foreground"})},{value:"other",label:"Other",icon:e.jsx(r,{className:"inline w-4 h-4 mr-1 text-muted-foreground"})},{value:"savings",label:"Savings",icon:e.jsx(r,{className:"inline w-4 h-4 mr-1 text-muted-foreground"})}],z=[{value:"one-time",label:"One-time"},{value:"daily",label:"Daily"},{value:"weekly",label:"Weekly"},{value:"monthly",label:"Monthly"},{value:"yearly",label:"Yearly"}],Q=({onSubmit:C})=>{const[t,w]=x.useState({date:new Date().toISOString().split("T")[0],amount:0,source:"",category:"",description:"",account:"Cash",repeat:"one-time",repeatStart:"",repeatEnd:""}),[u,h]=x.useState(!1),[p,c]=x.useState(""),{toast:d}=F(),{t:o}=L(),{currencies:S,currency:k}=O(),n=(a,s)=>{w(f=>({...f,[a]:s}))},E=a=>{if(a.preventDefault(),!t.amount||!t.source||!t.description){d({title:"Error",description:"Please fill in all required fields",variant:"destructive"});return}if(t.amount<=0){d({title:"Error",description:"Amount must be greater than 0",variant:"destructive"});return}if(t.repeat!=="one-time"&&(!t.repeatStart||!t.repeatEnd)){d({title:"Error",description:"Please provide both repeat start and end dates",variant:"destructive"});return}C(t),w({date:new Date().toISOString().split("T")[0],amount:0,source:"",category:"",description:"",account:"Cash",repeat:"one-time",repeatStart:"",repeatEnd:""}),c(""),h(!1),d({title:"Success",description:"Income added successfully!",variant:"default"})},I=B(M,{}),m=a=>{if(a==="=")try{const s=I.evaluate(p||t.amount.toString());n("amount",parseFloat(s.toString())),c(""),h(!1)}catch{d({title:"Error",description:"Invalid calculation",variant:"destructive"})}else c(a==="C"?"":a==="DEL"?s=>s.slice(0,-1):s=>s+a)};return x.useEffect(()=>{if(!u)return;const a=s=>{s.key>="0"&&s.key<="9"||["+","-","*","/","."].includes(s.key)?m(s.key):s.key==="Enter"?m("="):s.key==="Escape"?h(!1):s.key.toLowerCase()==="c"?m("C"):s.key==="Backspace"&&m("DEL")};return window.addEventListener("keydown",a),()=>window.removeEventListener("keydown",a)},[u,p]),e.jsxs("form",{onSubmit:E,className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"income-date",children:"Date"}),e.jsx(v,{id:"income-date",type:"date",value:t.date,onChange:a=>n("date",a.target.value),className:"shadow-soft"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(i,{htmlFor:"income-amount",children:["Amount (",S[k].symbol,") *"]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(v,{id:"income-amount",type:"number",step:"0.01",min:"0",value:p||t.amount||"",onChange:a=>n("amount",parseFloat(a.target.value)),placeholder:"0.00",className:"shadow-soft flex-1"}),e.jsx(N,{type:"button",variant:"ghost",size:"sm",onClick:()=>h(!u),children:e.jsx(A,{className:"h-4 w-4 text-muted-foreground"})})]}),u&&e.jsxs("div",{className:"inline top-16 right-10 w-64 p-2 rounded-lg shadow-md bg-background text-foreground z-50",children:[e.jsx("div",{className:"mb-2 text-right font-mono select-none border-b-2 pb-1 border-gray-200",children:p||t.amount}),e.jsx("div",{className:"grid grid-cols-5 gap-1",children:["7","8","9","+","4","5","6","-","1","2","3","*","0",".","=","/","C","DEL"].map(a=>e.jsx(N,{type:"button",variant:"outline",size:"sm",onClick:()=>m(a),children:a},a))})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"income-source",children:"Source *"}),e.jsxs(g,{value:t.source,onValueChange:a=>n("source",a),required:!0,children:[e.jsx(j,{className:"shadow-soft",children:e.jsx(y,{placeholder:"Select income source"})}),e.jsx(b,{className:"space-y-2 p-2 max-h-[300px] overflow-auto",children:q.map(({value:a,label:s,icon:f})=>e.jsxs(l,{value:a,className:"flex items-center gap-2",children:[f," ",s]},a))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"income-account",children:"account"}),e.jsxs(g,{value:t.account,onValueChange:a=>n("account",a),children:[e.jsx(j,{className:"shadow-soft",children:e.jsx(y,{placeholder:"selectAccount"})}),e.jsxs(b,{children:[e.jsxs(l,{value:"Cash",children:["ðŸ’µ ",o("cash")]}),e.jsxs(l,{value:"Savings",children:["ðŸ¦ ",o("savings")]}),e.jsxs(l,{value:"Bank",children:["ðŸ¦ ",o("bank")]}),e.jsxs(l,{value:"Credit Card",children:["ðŸ’³ ",o("creditCard")]}),e.jsxs(l,{value:"Debit Card",children:["ðŸ§ ",o("debitCard")]}),e.jsxs(l,{value:"Mobile Money",children:["ðŸ“± ",o("mobileMoney")]})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"income-repeat",children:"Repeat"}),e.jsxs(g,{value:t.repeat,onValueChange:a=>n("repeat",a),children:[e.jsx(j,{className:"shadow-soft",children:e.jsx(y,{placeholder:"Repeat frequency"})}),e.jsx(b,{children:z.map(({value:a,label:s})=>e.jsx(l,{value:a,children:s},a))})]})]})]}),t.repeat!=="one-time"&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(i,{htmlFor:"repeat-start",children:["Repeat Start"," *"]}),e.jsx(v,{id:"repeat-start",type:"date",value:t.repeatStart,onChange:a=>n("repeatStart",a.target.value),className:"shadow-soft"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(i,{htmlFor:"repeat-end",children:["Repeat End"," *"]}),e.jsx(v,{id:"repeat-end",type:"date",value:t.repeatEnd,onChange:a=>n("repeatEnd",a.target.value),className:"shadow-soft"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(i,{htmlFor:"income-description",children:["Description"," *"]}),e.jsx(R,{id:"income-description",value:t.description,onChange:a=>n("description",a.target.value),placeholder:"Where is this income from?",className:"shadow-soft",rows:3})]}),e.jsxs(N,{type:"submit",variant:"income",className:"w-full",children:[e.jsx(T,{className:"h-4 w-4 mr-2"}),"Add Income"]})]})};export{Q as IncomeForm};

import{aw as de,ax as me,r as N,j as e,ay as xe,az as J,aA as he,X as z,aB as q,aC as X,aD as Y,aE as ue,u as pe,aF as P,aG as R,aH as H}from"./react-ngz0KEri.js";import{g as b,u as ge,a as je,b as ve,C as fe,h as Ne,S as L,c as V,d as W,e as G,f as t}from"./index-q3cQ66e3.js";import{B as x}from"./button-BhbNX3hy.js";import{I as D}from"./input-DHhPsQaB.js";import{L as y}from"./label-BMo0q7YE.js";import"./vendor-CfMdQmI6.js";const ye=de,be=me,we=xe,K=N.forwardRef(({className:n,...i},d)=>e.jsx(X,{ref:d,className:b("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",n),...i}));K.displayName=X.displayName;const Q=N.forwardRef(({className:n,children:i,...d},w)=>e.jsxs(we,{children:[e.jsx(K,{}),e.jsxs(J,{ref:w,className:b("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",n),...d,children:[i,e.jsxs(he,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[e.jsx(z,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));Q.displayName=J.displayName;const Z=({className:n,...i})=>e.jsx("div",{className:b("flex flex-col space-y-1.5 text-center sm:text-left",n),...i});Z.displayName="DialogHeader";const _=N.forwardRef(({className:n,...i},d)=>e.jsx(q,{ref:d,className:b("text-lg font-semibold leading-none tracking-tight",n),...i}));_.displayName=q.displayName;const Ce=N.forwardRef(({className:n,...i},d)=>e.jsx(Y,{ref:d,className:b("text-sm text-muted-foreground",n),...i}));Ce.displayName=Y.displayName;const Fe=({expenses:n,income:i,onUpdateExpense:d,onUpdateIncome:w,onDeleteExpense:E,onDeleteIncome:F})=>{const{t:j}=ge(),{formatAmount:C}=je(),{toast:S}=ve(),[$,I]=N.useState(new Date),[c,A]=N.useState(null),[l,v]=N.useState({}),h=$.getFullYear(),u=$.getMonth(),U=new Date(h,u,1),ee=new Date(h,u+1,0),se=U.getDay(),ae=ee.getDate(),te=["January","February","March","April","May","June","July","August","September","October","November","December"],le=s=>{const f=`${h}-${String(u+1).padStart(2,"0")}-${String(s).padStart(2,"0")}`,r=n.filter(p=>p.date===f),m=i.filter(p=>p.date===f);return{expenses:r,income:m}},ne=()=>{I(new Date(h,u-1))},ie=()=>{I(new Date(h,u+1))},ce=()=>{const s=`${h}-${String(u+1).padStart(2,"0")}`,f=n.filter(g=>g.date.startsWith(s)),r=i.filter(g=>g.date.startsWith(s)),m=f.reduce((g,a)=>g+a.amount,0),p=r.reduce((g,a)=>g+a.amount,0);return{totalExpenses:m,totalIncome:p,monthExpenses:f,monthIncome:r}},{totalExpenses:re,totalIncome:oe}=ce(),M=s=>{A(s),v(s)},T=()=>{A(null),v({})},O=()=>{if(!c||!l.amount||!l.category||!l.description){S({title:"Error",description:"Please fill in all required fields",variant:"destructive"});return}const s={amount:parseFloat(l.amount.toString()),category:l.category,description:l.description,account:l.account,date:l.date};c.type==="expense"&&d?d(c.id,s):c.type==="income"&&w&&w(c.id,s),S({title:"Success",description:"Transaction updated successfully"}),T()},B=s=>{s.type==="expense"&&E?E(s.id):s.type==="income"&&F&&F(s.id),S({title:"Success",description:"Transaction deleted successfully"})},k=[];for(let s=0;s<se;s++)k.push(null);for(let s=1;s<=ae;s++)k.push(s);return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(x,{variant:"outline",size:"icon",onClick:ne,children:e.jsx(ue,{className:"h-4 w-4"})}),e.jsxs("h2",{className:"text-2xl font-bold",children:[te[u]," ",h]}),e.jsx(x,{variant:"outline",size:"icon",onClick:ie,children:e.jsx(pe,{className:"h-4 w-4"})})]}),e.jsx("div",{className:"flex gap-4",children:e.jsxs("div",{className:"text-sm text-muted-foreground",children:[j("income"),": ",C(oe)," | ",j("expenses"),": ",C(re)]})})]}),e.jsx(fe,{className:"shadow-medium",children:e.jsxs(Ne,{className:"p-6",children:[e.jsx("div",{className:"grid grid-cols-7 gap-2 mb-4",children:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(s=>e.jsx("div",{className:"text-center font-medium text-muted-foreground p-2",children:s},s))}),e.jsx("div",{className:"grid grid-cols-7 gap-2",children:k.map((s,f)=>{if(!s)return e.jsx("div",{className:"p-2 h-20"},f);const{expenses:r,income:m}=le(s),p=r.length>0||m.length>0,g=new Date().toDateString()===new Date(h,u,s).toDateString();return e.jsxs(ye,{children:[e.jsx(be,{asChild:!0,children:e.jsxs("div",{className:`
  p-2 h-20 border rounded-lg relative cursor-pointer
  ${g?"bg-primary/10 border-primary":"border-border"}
  ${p?"hover:shadow-soft transition-shadow ring-1 ring-primary/20":""}
  `,children:[e.jsx("div",{className:"font-medium text-sm",children:s}),e.jsxs("div",{className:"absolute bottom-1 left-1 right-1 space-y-1",children:[m.length>0&&e.jsx("div",{className:"h-1 bg-income rounded-full",title:`${m.length} income entries`}),r.length>0&&e.jsx("div",{className:"h-1 bg-expense rounded-full",title:`${r.length} expense entries`})]}),p&&e.jsxs("div",{className:"absolute top-1 right-1 flex gap-1",children:[m.length>0&&e.jsx("div",{className:"w-2 h-2 bg-income rounded-full"}),r.length>0&&e.jsx("div",{className:"w-2 h-2 bg-expense rounded-full"})]})]})}),p&&e.jsxs(Q,{className:"max-w-2xl max-h-[80vh] overflow-y-auto",children:[e.jsx(Z,{children:e.jsxs(_,{children:[j("transactionsFor")," ",s,"/",u+1,"/",h]})}),e.jsxs("div",{className:"space-y-4 mt-4",children:[m.length>0&&e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-income mb-2",children:j("income")}),e.jsx("div",{className:"space-y-2",children:m.map(a=>e.jsx("div",{className:"p-3 border border-income/20 rounded-lg bg-income/5",children:(c==null?void 0:c.id)===a.id?e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("div",{children:[e.jsx(y,{className:"text-xs",children:"Amount"}),e.jsx(D,{type:"number",step:"0.01",value:l.amount||"",onChange:o=>v({...l,amount:parseFloat(o.target.value)}),className:"h-8"})]}),e.jsxs("div",{children:[e.jsx(y,{className:"text-xs",children:"Category"}),e.jsxs(L,{value:l.category||"",onValueChange:o=>v({...l,category:o}),children:[e.jsx(V,{className:"h-8",children:e.jsx(W,{})}),e.jsxs(G,{children:[e.jsx(t,{value:"Business",children:"🏢 Business"}),e.jsx(t,{value:"Investment",children:"📈 Investment"}),e.jsx(t,{value:"Saving",children:"🏦 Saving"}),e.jsx(t,{value:"Gift",children:"🎁 Gift"}),e.jsx(t,{value:"Allowance",children:"🪙 Allowance"}),e.jsx(t,{value:"Petty Cash",children:"💵 Petty Cash"}),e.jsx(t,{value:"Other",children:"🔖 Other"})]})]})]})]}),e.jsxs("div",{children:[e.jsx(y,{className:"text-xs",children:"Description"}),e.jsx(D,{value:l.description||"",onChange:o=>v({...l,description:o.target.value}),className:"h-8"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(x,{size:"sm",onClick:O,className:"h-8",children:[e.jsx(P,{className:"h-3 w-3 mr-1"}),"Save"]}),e.jsxs(x,{size:"sm",variant:"outline",onClick:T,className:"h-8",children:[e.jsx(z,{className:"h-3 w-3 mr-1"}),"Cancel"]})]})]}):e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium",children:a.description}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[a.category," ",a.account&&`• ${a.account}`]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("p",{className:"font-semibold text-income",children:["+",C(a.amount)]}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx(x,{size:"sm",variant:"ghost",onClick:()=>M(a),className:"h-6 w-6 p-0",children:e.jsx(R,{className:"h-3 w-3"})}),e.jsx(x,{size:"sm",variant:"ghost",onClick:()=>B(a),className:"h-6 w-6 p-0 text-destructive hover:text-destructive",children:e.jsx(H,{className:"h-3 w-3"})})]})]})]})},a.id))})]}),r.length>0&&e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-expense mb-2",children:j("expenses")}),e.jsx("div",{className:"space-y-2",children:r.map(a=>e.jsx("div",{className:"p-3 border border-expense/20 rounded-lg bg-expense/5",children:(c==null?void 0:c.id)===a.id?e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("div",{children:[e.jsx(y,{className:"text-xs",children:"Amount"}),e.jsx(D,{type:"number",step:"0.01",value:l.amount||"",onChange:o=>v({...l,amount:parseFloat(o.target.value)}),className:"h-8"})]}),e.jsxs("div",{children:[e.jsx(y,{className:"text-xs",children:"Category"}),e.jsxs(L,{value:l.category||"",onValueChange:o=>v({...l,category:o}),children:[e.jsx(V,{className:"h-8 w-48",children:e.jsx(W,{placeholder:"Select category"})}),e.jsxs(G,{className:"grid grid-cols-2 gap-2 p-2 max-h-[280px] overflow-auto",children:[e.jsx(t,{value:"food-dining",children:"🍽️ Food & Dining"}),e.jsx(t,{value:"transportation",children:"🚗 Transportation"}),e.jsx(t,{value:"shopping",children:"🛍️ Shopping"}),e.jsx(t,{value:"bills-utilities",children:"💡 Bills & Utilities"}),e.jsx(t,{value:"healthcare",children:"🏥 Healthcare"}),e.jsx(t,{value:"entertainment",children:"🎬 Entertainment"}),e.jsx(t,{value:"education",children:"🎓 Education"}),e.jsx(t,{value:"travel",children:"✈️ Travel"}),e.jsx(t,{value:"housing",children:"🏠 Housing"}),e.jsx(t,{value:"apparel",children:"👗 Apparel"}),e.jsx(t,{value:"beauty",children:"💄 Beauty"}),e.jsx(t,{value:"culture",children:"🎭 Culture"}),e.jsx(t,{value:"loan",children:"💰 Loan"}),e.jsx(t,{value:"other",children:"🔖 Other"})]})]})]})]}),e.jsxs("div",{children:[e.jsx(y,{className:"text-xs",children:"Description"}),e.jsx(D,{value:l.description||"",onChange:o=>v({...l,description:o.target.value}),className:"h-8"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(x,{size:"sm",onClick:O,className:"h-8",children:[e.jsx(P,{className:"h-3 w-3 mr-1"}),"Save"]}),e.jsxs(x,{size:"sm",variant:"outline",onClick:T,className:"h-8",children:[e.jsx(z,{className:"h-3 w-3 mr-1"}),"Cancel"]})]})]}):e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium",children:a.description}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[a.category," ",a.account&&`• ${a.account}`]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("p",{className:"font-semibold text-expense",children:["-",C(a.amount)]}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx(x,{size:"sm",variant:"ghost",onClick:()=>M(a),className:"h-6 w-6 p-0",children:e.jsx(R,{className:"h-3 w-3"})}),e.jsx(x,{size:"sm",variant:"ghost",onClick:()=>B(a),className:"h-6 w-6 p-0 text-destructive hover:text-destructive",children:e.jsx(H,{className:"h-3 w-3"})})]})]})]})},a.id))})]})]})]})]},s)})})]})}),e.jsxs("div",{className:"flex items-center justify-center gap-6 text-sm text-muted-foreground",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-4 h-1 bg-income rounded-full"}),e.jsx("span",{children:j("income")})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-4 h-1 bg-expense rounded-full"}),e.jsx("span",{children:j("expenses")})]}),e.jsx("p",{className:"text-xs",children:j("clickDateToView")})]})]})};export{Fe as FinancialCalendar};
